# ç°æœ‰å¼€å¡æµç¨‹å®Œæ•´æ¢³ç†

> **æ¢³ç†æ—¶é—´**ï¼š2025-12-24  
> **ç›®çš„**ï¼šç†æ¸…ç°æœ‰ä»£ç çš„å¼€å¡é€»è¾‘ã€é¡µé¢è·³è½¬å’Œ API è°ƒç”¨

---

## ğŸ“± é¡µé¢æµç¨‹å›¾

```
CardScreen (å¼€å¡é¦–é¡µ)
    â†“ ç‚¹å‡»"ApplyNow"æŒ‰é’®
CardApplyConfirmScreen (ç¡®è®¤ç”³è¯·é¡µ)
    â†“ é€‰æ‹©ç½‘ç»œ + ç‚¹å‡»Submit
Cardverificationscreen (å¡«å†™èµ„æ–™é¡µ)
    â†“ å¡«å†™ä¸ªäººä¿¡æ¯ + Continue
ProfilkycDiditScreen (Didit KYCè®¤è¯é¡µ - WebView)
    â†“ WebViewå®Œæˆè®¤è¯
CardOtpScreen (OTPéªŒè¯é¡µ)
    â†“ è¾“å…¥éªŒè¯ç 
CardCompliteScreen (ç”³è¯·å®Œæˆé¡µ)
    â†“ è‡ªåŠ¨è·³è½¬
CardCompliteStatusScreen (çŠ¶æ€é¡µ)
    â†“ è¿”å›é¦–é¡µ
```

---

## ğŸ” è¯¦ç»†é¡µé¢åˆ†æ

### 1ï¸âƒ£ CardScreen.dart - å¼€å¡é¦–é¡µ

**æ–‡ä»¶è·¯å¾„**: `lib/views/homes/CardScreen.dart`

#### é¡µé¢åŠŸèƒ½

- å¦‚æœç”¨æˆ·**å·²æœ‰ KYC è®°å½•** â†’ æ˜¾ç¤ºè™šæ‹Ÿå¡ç•Œé¢ï¼ˆä½™é¢ã€å¡å·ã€äº¤æ˜“è®°å½•ï¼‰
- å¦‚æœç”¨æˆ·**æ²¡æœ‰ KYC è®°å½•** â†’ æ˜¾ç¤ºç”³è¯·é¡µé¢ï¼ˆApply Now æŒ‰é’®ï¼‰

#### è°ƒç”¨çš„æ¥å£

| API è°ƒç”¨       | æ–¹æ³•/Service                                 | ä½œç”¨                               |
| -------------- | -------------------------------------------- | ---------------------------------- |
| è·å–ç”¨æˆ·ä¿¡æ¯   | `ProfileScreenViewModel.getProfile()`        | è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„ email å’Œ userId |
| æŸ¥è¯¢ KYC æ•°æ®  | `KycService.getUserKyc(email)`               | æŸ¥è¯¢è¯¥ç”¨æˆ·æ˜¯å¦å·²æäº¤ KYC ç”³è¯·      |
| è·å–å¡è¯¦æƒ…     | `ProfileScreenViewModel.getCardData(kyc_id)` | å¦‚æœæœ‰ KYC è®°å½•ï¼Œè·å–è™šæ‹Ÿå¡è¯¦æƒ…    |
| åˆ›å»ºè™šæ‹Ÿå¡     | `ProfileScreenViewModel.createCard()`        | å¦‚æœå¡æ•°æ®ä¸ºç©ºï¼Œå°è¯•åˆ›å»ºå¡         |
| è·å–å¡äº¤æ˜“è®°å½• | `CardTradeViewModel.fetchCardTrades()`       | è·å–è™šæ‹Ÿå¡çš„äº¤æ˜“å†å²               |

#### æ ¸å¿ƒé€»è¾‘ä»£ç 

```dart
// ç¬¬85-121è¡Œï¼šåŠ è½½ç”¨æˆ·ä¿¡æ¯
Future<void> _loadProfile() async {
  final accessToken = HiveStorageService.getAccessToken();
  final success = await _viewModel.getProfile(accessToken);
  if (success) {
    email = _viewModel.profileResponse?.user.email;
    userId = _viewModel.profileResponse?.user.id.toString();

    // å¦‚æœæœ‰emailï¼ŒåŠ è½½KYCæ•°æ®
    if (email != null) {
      await _loadKycData(email!);
    }
  }
}

// ç¬¬123-151è¡Œï¼šåŠ è½½KYCæ•°æ®
Future<void> _loadKycData(String kycEmail) async {
  final kycService = KycService();
  final result = await kycService.getUserKyc(kycEmail);
  // å¦‚æœæœ‰KYCæ•°æ®ï¼Œå†åŠ è½½å¡æ•°æ®
  await _loadCardData(kycData[0].id);
}

// ç¬¬153-214è¡Œï¼šåŠ è½½å¡æ•°æ®
Future<void> _loadCardData(int kyc_id) async {
  final cardResponse = await _viewModel.getCardData(kyc_id);

  if (cardResponse != null) {
    _cardDetailData = cardResponse.data;
    _showBlankScreen = (_kycTotal != null && _kycTotal! >= 1);
  } else {
    // å¦‚æœæ²¡æœ‰å¡æ•°æ®ï¼Œå°è¯•åˆ›å»ºå¡
    await _viewModel.createCard(_kycData!, _viewModel.profileResponse!);
  }
}
```

#### API ç«¯ç‚¹è¯¦æƒ…

**1. è·å–ç”¨æˆ· KYC è®°å½•**

```dart
// KycService.dart
baseUrl: 'http://31.97.222.142:2050/api'
GET /kyc?page=1&limit=10&email=xxx@qq.com

è¿”å›ç¤ºä¾‹ï¼š
{
  "code": 200,
  "data": {
    "total": 1,
    "list": [{
      "id": 123,
      "email": "xxx@qq.com",
      "first_name": "John",
      "last_name": "Doe",
      "status": 1,
      ...
    }]
  }
}
```

#### é¡µé¢è·³è½¬

```dart
// ç¬¬672-679è¡Œï¼šç‚¹å‡»"Apply Now"æŒ‰é’®
Navigator.push(
  context,
  MaterialPageRoute(
    builder: (context) => const CardApplyConfirmScreen(),
  ),
);
```

---

### 2ï¸âƒ£ CardApplyConfirmScreen.dart - ç¡®è®¤ç”³è¯·é¡µ

**æ–‡ä»¶è·¯å¾„**: `lib/views/homes/CardApplyConfirmScreen.dart`

#### é¡µé¢åŠŸèƒ½

1. æ˜¾ç¤ºå¡ä¿¡æ¯ï¼ˆ**ç¡¬ç¼–ç **ï¼‰ï¼š
   - å¡åç§°: "Come Come Pay Card"
   - å¡ç»„ç»‡: "VISA"
   - å¡è´¹: "5 USD"
2. è®©ç”¨æˆ·é€‰æ‹©æ”¯ä»˜ç½‘ç»œï¼ˆå®é™…æ˜¯å¸ç§ï¼‰
3. ç‚¹å‡» Submit è·³è½¬åˆ°ä¸‹ä¸€æ­¥

#### è°ƒç”¨çš„æ¥å£

| API è°ƒç”¨     | æ–¹æ³•/Service                              | ä½œç”¨                                    |
| ------------ | ----------------------------------------- | --------------------------------------- |
| è·å–å¸ç§åˆ—è¡¨ | `TokenReceiveViewModel.fetchCryptoData()` | è·å–æ‰€æœ‰æ”¯æŒçš„å¸ç§ï¼ˆBTC, ETH, USDT ç­‰ï¼‰ |

**âš ï¸ æ³¨æ„**ï¼šè¿™ä¸ªæ¥å£ä¸æ˜¯ä¸“é—¨çš„æ”¯ä»˜å¸ç§æ¥å£ï¼Œæ˜¯æ”¶æ¬¾å¸ç§æ¥å£

#### æ ¸å¿ƒé€»è¾‘ä»£ç 

```dart
// ç¬¬19-22è¡Œï¼šåˆå§‹åŒ–æ—¶è·å–å¸ç§åˆ—è¡¨
ChangeNotifierProvider<TokenReceiveViewModel>(
  create: (context) => TokenReceiveViewModel()
    ..fetchCryptoData()  // è·å–æ‰€æœ‰å¸ç§
    ..setTotalAssets(0.0),
)

// ç¬¬74è¡Œï¼šæ˜¾ç¤ºç½‘ç»œé€‰æ‹©è¡Œ
_buildNetworkSelectionRow(viewModel)

// ç¬¬182-227è¡Œï¼šæ„å»ºç½‘ç»œé€‰æ‹©UI
Widget _buildNetworkSelectionRow(TokenReceiveViewModel viewModel) {
  return GestureDetector(
    onTap: () {
      _showNetworkSelectionBottomSheet(viewModel);
    },
    child: Container(...æ˜¾ç¤ºé€‰æ‹©çš„ç½‘ç»œ...)
  );
}

// ç¬¬241-309è¡Œï¼šå¼¹å‡ºç½‘ç»œé€‰æ‹©å¼¹çª—
void _showNetworkSelectionBottomSheet(TokenReceiveViewModel viewModel) {
  showModalBottomSheet(
    // æ˜¾ç¤ºæ‰€æœ‰å¸ç§åˆ—è¡¨ï¼ˆè¿‡æ»¤æ‰HKDï¼‰
    itemBuilder: (context, index) {
      final token = viewModel.filteredTokens[index];
      if (token['symbol'] == 'HKD') {
        return const SizedBox.shrink();
      }
      return _buildNetworkItem(token);
    }
  );
}
```

#### é¡µé¢è·³è½¬

```dart
// ç¬¬82-101è¡Œï¼šç‚¹å‡»SubmitæŒ‰é’®
onPressed: _selectedNetwork == null
  ? null
  : () async {
      // TODO: å°†é€‰æ‹©çš„ç½‘ç»œåœ°å€å‘é€åˆ°åç«¯
      final networkAddress = _selectedNetwork!['address'] ?? 'mock_address';

      // âŒ è·³è¿‡äº†æ”¯ä»˜ç¯èŠ‚ï¼Œç›´æ¥è·³åˆ°KYCå¡«èµ„æ–™é¡µé¢
      Navigator.push(
        context,
        MaterialPageRoute(
          builder: (context) => const Cardverificationscreen(),
        ),
      );
    }
```

**ğŸ”´ å…³é”®é—®é¢˜**ï¼š

- æ²¡æœ‰åˆ›å»ºæ”¯ä»˜è®¢å•
- æ²¡æœ‰é€‰æ‹©ä¼˜æƒ åˆ¸åŠŸèƒ½
- é€‰æ‹©çš„ç½‘ç»œåœ°å€æ²¡æœ‰è¢«ä½¿ç”¨
- ç›´æ¥è·³è¿‡äº†æ”¯ä»˜æµç¨‹

---

### 3ï¸âƒ£ Cardverificationscreen.dart - å¡«å†™èµ„æ–™é¡µ

**æ–‡ä»¶è·¯å¾„**: `lib/views/homes/CardVerificationScreen.dart`

#### é¡µé¢åŠŸèƒ½

ç”¨æˆ·å¡«å†™ KYC æ‰€éœ€çš„ä¸ªäººä¿¡æ¯ï¼š

- Name (å§“å - å¤§å†™è‹±æ–‡)
- Surname (å§“æ° - å¤§å†™è‹±æ–‡)
- Mobile Phone (æ‰‹æœºå·)
- Country / Region (å›½å®¶/åœ°åŒº)
- State / Province (å·/çœ)
- City (åŸå¸‚)
- Detailed Address (è¯¦ç»†åœ°å€)
- Post Code (é‚®ç¼–)

#### è°ƒç”¨çš„æ¥å£

| API è°ƒç”¨           | æ–¹æ³•/Service                                    | ä½œç”¨                    |
| ------------------ | ----------------------------------------------- | ----------------------- |
| åˆå§‹åŒ– Didit Token | `ProfileScreenViewModel.initializeDiditToken()` | ç”Ÿæˆ Didit KYC è®¤è¯é“¾æ¥ |

#### æ ¸å¿ƒé€»è¾‘ä»£ç 

```dart
// ç¬¬182-241è¡Œï¼šç‚¹å‡»ContinueæŒ‰é’®
onPressed: () async {
  if (_formKey.currentState!.validate()) {
    // éªŒè¯å§“ååªèƒ½æ˜¯å¤§å†™è‹±æ–‡å­—æ¯
    if (!_validateEnglishUppercase(_nameController.text, 'Name')) return;
    if (!_validateEnglishUppercase(_surnameController.text, 'Surname')) return;

    // è·å–ç”¨æˆ·email
    final user = HiveStorageService.getUser();
    final email = user?.email ?? '';

    // åˆ›å»ºè¯·æ±‚æ•°æ®
    final request = DiditInitializeTokenRequestModel(
      address: _addressController.text,
      agentUid: '${_nameController.text}_${_surnameController.text}_${DateTime.now()}',
      areaCode: _selectedCode.replaceAll('+', ''),
      billCountryCode: _selectedCountry == 'China' ? 'CN' : ...,
      city: _cityController.text,
      email: email,
      firstEnName: _nameController.text.toUpperCase(),
      lastEnName: _surnameController.text.toUpperCase(),
      phone: _phoneNumberController.text,
      postCode: _postcodeController.text,
      returnUrl: 'https://yourapp.com/kyc/didit/callback',
      state: _stateController.text,
    );

    // è°ƒç”¨APIåˆå§‹åŒ–Didit Token
    final response = await _viewModel.initializeDiditToken(request);

    if (response != null && response.diditToken.data.url.isNotEmpty) {
      // è·³è½¬åˆ°Didit WebViewé¡µé¢
      Navigator.push(
        context,
        MaterialPageRoute(
          builder: (context) => ProfilkycDiditScreen(
            url: response.diditToken.data.url,
          ),
        ),
      );
    }
  }
}
```

#### API ç«¯ç‚¹è¯¦æƒ…

**åˆå§‹åŒ– Didit KYC Token**

```dart
// ProfileScreenViewModel.dart
POST /api/v1/user/initialize-didit-token

è¯·æ±‚å‚æ•°ï¼š
{
  "address": "...",
  "agent_uid": "JOHN_DOE_1234567890",
  "area_code": "86",
  "bill_country_code": "CN",
  "city": "Beijing",
  "email": "user@example.com",
  "first_en_name": "JOHN",
  "last_en_name": "DOE",
  "phone": "13800138000",
  "post_code": "100000",
  "return_url": "https://yourapp.com/kyc/didit/callback",
  "state": "Beijing"
}

è¿”å›ç¤ºä¾‹ï¼š
{
  "didit_token": {
    "data": {
      "url": "https://didit.xyz/verify?token=xxx"
    }
  }
}
```

---

### 4ï¸âƒ£ ProfilkycDiditScreen.dart - Didit KYC è®¤è¯é¡µ

**æ–‡ä»¶è·¯å¾„**: `lib/views/homes/ProfilKycDiditScreen.dart`

#### é¡µé¢åŠŸèƒ½

- ä½¿ç”¨ WebView åŠ è½½ Didit çš„ KYC è®¤è¯é¡µé¢
- ç”¨æˆ·åœ¨ WebView ä¸­å®Œæˆèº«ä»½è®¤è¯ï¼ˆæ‹ç…§ã€ä¸Šä¼ è¯ä»¶ç­‰ï¼‰
- å®Œæˆåå¯èƒ½æœ‰å›è°ƒ

#### è°ƒç”¨çš„æ¥å£

**æ— ç›´æ¥ API è°ƒç”¨**ï¼Œåªæ˜¯åŠ è½½å¤–éƒ¨çš„ Didit è®¤è¯ç½‘é¡µ

#### æ ¸å¿ƒé€»è¾‘

```dart
// ä½¿ç”¨WebViewåŠ è½½URL
WebView(
  initialUrl: widget.url,  // ä»ä¸Šä¸€é¡µä¼ æ¥çš„Didit URL
  javascriptMode: JavascriptMode.unrestricted,
)
```

---

### 5ï¸âƒ£ CardOtpScreen.dart - OTP éªŒè¯é¡µ

**æ–‡ä»¶è·¯å¾„**: `lib/views/homes/CardOtpScreen.dart`

#### é¡µé¢åŠŸèƒ½

- ç”¨æˆ·è¾“å…¥ 6 ä½ OTP éªŒè¯ç 
- éªŒè¯é€šè¿‡åè·³è½¬åˆ°å®Œæˆé¡µ

#### è°ƒç”¨çš„æ¥å£

**âš ï¸ ä»ä»£ç çœ‹ï¼Œæ²¡æœ‰å®é™…è°ƒç”¨éªŒè¯ OTP çš„ API**ï¼Œåªæ˜¯ UI å±•ç¤º

#### æ ¸å¿ƒé€»è¾‘

```dart
// ç¬¬100è¡Œï¼šç‚¹å‡»VerifyæŒ‰é’®
Navigator.pushNamed(context, '/CardCompliteScreen');
```

**ğŸ”´ å…³é”®é—®é¢˜**ï¼š

- æ²¡æœ‰è°ƒç”¨åç«¯éªŒè¯ OTP æ¥å£
- ç›´æ¥è·³è½¬ï¼Œæ²¡æœ‰çœŸæ­£éªŒè¯

---

### 6ï¸âƒ£ CardCompliteScreen.dart - ç”³è¯·å®Œæˆé¡µ

**æ–‡ä»¶è·¯å¾„**: `lib/views/homes/CardCompliteScreen.dart`

#### é¡µé¢åŠŸèƒ½

- æ˜¾ç¤º"Application Complete"çš„æˆåŠŸæç¤º
- 3 ç§’åè‡ªåŠ¨è·³è½¬åˆ°çŠ¶æ€é¡µ

#### è°ƒç”¨çš„æ¥å£

**æ—  API è°ƒç”¨**

#### æ ¸å¿ƒé€»è¾‘

```dart
// ç¬¬17è¡Œï¼šè‡ªåŠ¨è·³è½¬
Navigator.pushReplacement(
  context,
  MaterialPageRoute(
    builder: (context) => const Cardcompletestatus(),
  ),
);
```

---

### 7ï¸âƒ£ CardCompliteStatusScreen.dart - çŠ¶æ€é¡µ

**æ–‡ä»¶è·¯å¾„**: `lib/views/homes/CardCompliteStatusScreen.dart`

#### é¡µé¢åŠŸèƒ½

- æ˜¾ç¤º"Application Successful"
- æ˜¾ç¤ºå¤„ç†æ—¶é—´æç¤º
- 3 ç§’åè¿”å›é¦–é¡µ

#### è°ƒç”¨çš„æ¥å£

**æ—  API è°ƒç”¨**

#### æ ¸å¿ƒé€»è¾‘

```dart
// ç¬¬19è¡Œï¼šè‡ªåŠ¨è¿”å›é¦–é¡µ
Navigator.pushReplacement(
  context,
  MaterialPageRoute(
    builder: (context) => const CardScreen(),
  ),
);
```

---

## ğŸ“Š å®Œæ•´æµç¨‹æ—¶åºå›¾

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant CS as CardScreen
    participant CAC as CardApplyConfirmScreen
    participant CVS as Cardverificationscreen
    participant PKD as ProfilkycDiditScreen
    participant OTP as CardOtpScreen
    participant Complete as CardCompliteScreen
    participant Status as CardCompliteStatusScreen
    participant API as åç«¯API

    U->>CS: æ‰“å¼€å¼€å¡é¡µé¢
    CS->>API: getProfile() - è·å–ç”¨æˆ·ä¿¡æ¯
    API-->>CS: è¿”å›ç”¨æˆ·emailå’ŒuserId
    CS->>API: getUserKyc(email) - æŸ¥è¯¢KYCè®°å½•
    API-->>CS: è¿”å›KYCæ•°æ®ï¼ˆå¯èƒ½ä¸ºç©ºï¼‰

    alt æ²¡æœ‰KYCè®°å½•
        CS-->>U: æ˜¾ç¤º"Apply Now"æŒ‰é’®
        U->>CS: ç‚¹å‡»"Apply Now"
        CS->>CAC: è·³è½¬åˆ°ç¡®è®¤ç”³è¯·é¡µ

        CAC->>API: fetchCryptoData() - è·å–å¸ç§åˆ—è¡¨
        API-->>CAC: è¿”å›æ‰€æœ‰å¸ç§
        CAC-->>U: æ˜¾ç¤ºå¡ä¿¡æ¯(ç¡¬ç¼–ç )+ç½‘ç»œé€‰æ‹©
        U->>CAC: é€‰æ‹©ç½‘ç»œ+ç‚¹å‡»Submit

        Note over CAC: âŒ è·³è¿‡äº†æ”¯ä»˜æµç¨‹

        CAC->>CVS: è·³è½¬åˆ°å¡«èµ„æ–™é¡µ
        CVS-->>U: æ˜¾ç¤ºè¡¨å•
        U->>CVS: å¡«å†™ä¸ªäººä¿¡æ¯+Continue

        CVS->>API: initializeDiditToken() - ç”ŸæˆKYCé“¾æ¥
        API-->>CVS: è¿”å›Diditè®¤è¯URL

        CVS->>PKD: è·³è½¬åˆ°Didit WebView
        PKD-->>U: åŠ è½½Diditè®¤è¯é¡µé¢
        U->>PKD: å®Œæˆèº«ä»½è®¤è¯

        PKD->>OTP: è·³è½¬åˆ°OTPéªŒè¯é¡µ
        OTP-->>U: æ˜¾ç¤ºOTPè¾“å…¥æ¡†
        U->>OTP: è¾“å…¥éªŒè¯ç +Verify

        Note over OTP: âŒ æ²¡æœ‰çœŸæ­£éªŒè¯OTP

        OTP->>Complete: è·³è½¬åˆ°å®Œæˆé¡µ
        Complete-->>U: æ˜¾ç¤º"Application Complete"
        Complete->>Status: 3ç§’åè‡ªåŠ¨è·³è½¬
        Status-->>U: æ˜¾ç¤º"Application Successful"
        Status->>CS: 3ç§’åè¿”å›é¦–é¡µ
    else å·²æœ‰KYCè®°å½•
        CS->>API: getCardData(kyc_id) - è·å–å¡è¯¦æƒ…
        API-->>CS: è¿”å›è™šæ‹Ÿå¡ä¿¡æ¯
        CS->>API: fetchCardTrades() - è·å–äº¤æ˜“è®°å½•
        API-->>CS: è¿”å›äº¤æ˜“åˆ—è¡¨
        CS-->>U: æ˜¾ç¤ºè™šæ‹Ÿå¡ç•Œé¢(ä½™é¢+å¡å·+äº¤æ˜“)
    end
```

---

## ğŸ”§ Service å’Œ ViewModel åˆ†æ

### ä½¿ç”¨çš„ Service

| Service                  | ç”¨é€”                                 | Base URL                        |
| ------------------------ | ------------------------------------ | ------------------------------- |
| `KycService`             | æŸ¥è¯¢ KYC è®°å½•                        | `http://31.97.222.142:2050/api` |
| `ProfileScreenViewModel` | ç”¨æˆ·ä¿¡æ¯ã€åˆå§‹åŒ– Didit Tokenã€å¡æ•°æ® | é»˜è®¤ BaseService                |
| `TokenReceiveViewModel`  | è·å–å¸ç§åˆ—è¡¨                         | é»˜è®¤ BaseService                |
| `CardTradeViewModel`     | è·å–å¡äº¤æ˜“è®°å½•                       | é»˜è®¤ BaseService                |

### è°ƒç”¨çš„ API æ±‡æ€»

| API ç«¯ç‚¹                                   | æ–¹æ³•                   | ä½œç”¨          | åœ¨å“ªä¸ªé¡µé¢             |
| ------------------------------------------ | ---------------------- | ------------- | ---------------------- |
| `GET /api/v1/user/profile`                 | getProfile()           | è·å–ç”¨æˆ·ä¿¡æ¯  | CardScreen             |
| `GET /kyc`                                 | getUserKyc(email)      | æŸ¥è¯¢ KYC è®°å½• | CardScreen             |
| `GET /api/v1/card/detail`                  | getCardData(kyc_id)    | è·å–å¡è¯¦æƒ…    | CardScreen             |
| `POST /api/v1/card/create`                 | createCard()           | åˆ›å»ºè™šæ‹Ÿå¡    | CardScreen             |
| `GET /api/v1/card/trades`                  | fetchCardTrades()      | è·å–äº¤æ˜“è®°å½•  | CardScreen             |
| `GET /api/v1/wallet/crypto-data`           | fetchCryptoData()      | è·å–å¸ç§åˆ—è¡¨  | CardApplyConfirmScreen |
| `POST /api/v1/user/initialize-didit-token` | initializeDiditToken() | ç”Ÿæˆ KYC é“¾æ¥ | Cardverificationscreen |

---

## âŒ ç°æœ‰æµç¨‹çš„é—®é¢˜æ€»ç»“

### 1. **å®Œå…¨ç¼ºå¤±æ”¯ä»˜é€»è¾‘**

- ä»`CardApplyConfirmScreen`ç›´æ¥è·³åˆ°`Cardverificationscreen`
- ä¸­é—´æ²¡æœ‰ä»»ä½•æ”¯ä»˜ç›¸å…³çš„ä»£ç 
- ç”¨æˆ·æ²¡æœ‰æœºä¼šæ”¯ä»˜å¼€å¡è´¹

### 2. **ç¡¬ç¼–ç æ•°æ®**

```dart
// CardApplyConfirmScreen.dart
_buildInfoRow('Card fee', '5 USD', isClickable: false)  // å†™æ­»5ç¾å…ƒ
_buildInfoRow('Card name', 'Come Come Pay Card', isClickable: true)
_buildInfoRow('Card organization', 'VISA', isClickable: false)
```

### 3. **ç½‘ç»œé€‰æ‹©ç”¨é€”ä¸æ˜**

- é€‰æ‹©äº†ç½‘ç»œï¼ˆå¸ç§ï¼‰ï¼Œä½†é€‰æ‹©çš„åœ°å€æ²¡æœ‰è¢«ä½¿ç”¨
- ä»£ç ä¸­æœ‰ TODO æ³¨é‡Šï¼š`// TODO: å°†é€‰æ‹©çš„ç½‘ç»œåœ°å€å‘é€åˆ°åç«¯`
- å®é™…ä¸Šæ–°æ¥å£éœ€è¦çš„æ˜¯ä»é’±åŒ…æ‰£æ¬¾ï¼Œä¸éœ€è¦åœ°å€

### 4. **æ²¡æœ‰ä¼˜æƒ åˆ¸é›†æˆ**

- `CardApplyScreen.dart`é‡Œæœ‰ä¼˜æƒ åˆ¸ UIï¼Œä½†æ˜¯ç©ºå®ç°
- æ²¡æœ‰å¼¹çª—é€‰æ‹©ä¼˜æƒ åˆ¸
- æ²¡æœ‰ä¼ é€’ä¼˜æƒ åˆ¸åˆ°åç«¯

### 5. **OTP éªŒè¯æ˜¯å‡çš„**

- `CardOtpScreen`åªæ˜¯ UI å±•ç¤º
- æ²¡æœ‰è°ƒç”¨åç«¯éªŒè¯ OTP æ¥å£
- ç›´æ¥ç‚¹å‡»å°±è·³è½¬ï¼Œæ²¡æœ‰çœŸæ­£éªŒè¯

### 6. **KYC èµ„æ ¼æ£€æŸ¥ç¼ºå¤±**

- æ²¡æœ‰è°ƒç”¨`/api/v1/kyc/eligibility`æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²æ”¯ä»˜
- ç†è®ºä¸Šåº”è¯¥åœ¨è·³è½¬åˆ° KYC é¡µé¢å‰æ£€æŸ¥

---

## ğŸ¯ æ€»ç»“

### å½“å‰å®ç°çš„åŠŸèƒ½

âœ… ç”¨æˆ·ä¿¡æ¯è·å–  
âœ… KYC è®°å½•æŸ¥è¯¢  
âœ… è™šæ‹Ÿå¡å±•ç¤ºï¼ˆå¦‚æœå·²æœ‰å¡ï¼‰  
âœ… KYC èµ„æ–™å¡«å†™è¡¨å•  
âœ… Didit è®¤è¯é›†æˆï¼ˆWebViewï¼‰  
âœ… UI æµç¨‹å®Œæ•´

### ç¼ºå¤±çš„åŠŸèƒ½

âŒ å¼€å¡è´¹åŠ¨æ€é…ç½®  
âŒ åˆ›å»ºæ”¯ä»˜è®¢å•  
âŒ é€‰æ‹©ä¼˜æƒ åˆ¸  
âŒ é€‰æ‹©æ”¯ä»˜å¸ç§  
âŒ å®Œæˆæ”¯ä»˜ï¼ˆé’±åŒ…æ‰£æ¬¾ï¼‰  
âŒ æ”¯ä»˜çŠ¶æ€æŸ¥è¯¢  
âŒ KYC èµ„æ ¼éªŒè¯  
âŒ OTP çœŸå®éªŒè¯

### ä¸€å¥è¯æ€»ç»“

**ç°æœ‰ä»£ç åªå®ç°äº†"KYC èµ„æ–™é‡‡é›†çš„ UI æµç¨‹"ï¼Œå®Œå…¨æ²¡æœ‰"å¼€å¡è´¹æ”¯ä»˜"çš„é€»è¾‘ã€‚ç”¨æˆ·çœ‹ä¼¼èµ°å®Œäº†æµç¨‹ï¼Œå®é™…ä¸Šæ²¡æœ‰æ”¯ä»˜ä»»ä½•è´¹ç”¨å°±æäº¤äº† KYC ç”³è¯·ã€‚**

---

_æ¢³ç†å®Œæˆæ—¶é—´ï¼š2025-12-24_
